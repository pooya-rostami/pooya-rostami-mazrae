"use strict";(self.webpackChunkpooya_rostami_mazrae=self.webpackChunkpooya_rostami_mazrae||[]).push([[640],{7957:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"tutorials/jwt","title":"JWT","description":"What is a JWT?","source":"@site/docs/tutorials/5_jwt.md","sourceDirName":"tutorials","slug":"/tutorials/jwt","permalink":"/docs/tutorials/jwt","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"JWT"},"sidebar":"tutorialSidebar","previous":{"title":"Middleware In API Design","permalink":"/docs/tutorials/middleware_in_api"}}');var t=n(4848),i=n(8453);const o={sidebar_position:6,title:"JWT"},l=void 0,a={},c=[{value:"What is a JWT?",id:"what-is-a-jwt",level:2},{value:"Why Use JWT?",id:"why-use-jwt",level:2},{value:"1. Stateless Authentication",id:"1-stateless-authentication",level:3},{value:"2. Scalability",id:"2-scalability",level:3},{value:"3. Cross-domain and Cross-platform Support",id:"3-cross-domain-and-cross-platform-support",level:3},{value:"4. Fine-grained Control via Claims",id:"4-fine-grained-control-via-claims",level:3},{value:"5. Widely Supported",id:"5-widely-supported",level:3},{value:"Alternatives to JWT",id:"alternatives-to-jwt",level:2},{value:"1. Session-Based Authentication",id:"1-session-based-authentication",level:3},{value:"2. OAuth 2.0 + Access Tokens",id:"2-oauth-20--access-tokens",level:3},{value:"3. API Keys",id:"3-api-keys",level:3},{value:"4. Paseto (Platform-Agnostic Security Tokens)",id:"4-paseto-platform-agnostic-security-tokens",level:3},{value:"Setting Up JWT in a Node.js + Express + TypeScript Project",id:"setting-up-jwt-in-a-nodejs--express--typescript-project",level:2},{value:"Setup &amp; Dependencies",id:"setup--dependencies",level:3},{value:"Project Structure",id:"project-structure",level:3},{value:".env",id:"env",level:3},{value:"Example TypeScript Code",id:"example-typescript-code",level:2},{value:"<code>types.ts</code>",id:"typests",level:3},{value:"<code>auth.ts</code>",id:"authts",level:3},{value:"<code>index.ts</code>",id:"indexts",level:3},{value:"How to Test JWT Auth",id:"how-to-test-jwt-auth",level:2},{value:"1. Get a Token",id:"1-get-a-token",level:3},{value:"2. Access Protected Route",id:"2-access-protected-route",level:3},{value:"Good Practices",id:"good-practices",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"what-is-a-jwt",children:"What is a JWT?"}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.strong,{children:"JSON Web Token (JWT)"})," is a secure way of transmitting information between parties as a ",(0,t.jsx)(s.strong,{children:"JSON object"}),". It's widely used in ",(0,t.jsx)(s.strong,{children:"authentication systems"}),", where servers need a way to verify the identity of clients (e.g., browsers or mobile apps) without storing session state on the server."]}),"\n",(0,t.jsx)(s.p,{children:"Each JWT contains three base64-encoded components:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Header"}),": Specifies the signing algorithm (e.g., HS256) and token type (usually \u201cJWT\u201d)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Payload"}),": Holds user-related data (also called ",(0,t.jsx)(s.strong,{children:"claims"}),"). This can include things like ",(0,t.jsx)(s.code,{children:"userId"}),", ",(0,t.jsx)(s.code,{children:"email"}),", ",(0,t.jsx)(s.code,{children:"roles"}),", etc."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Signature"}),": Created by hashing the encoded header and payload with a secret key using the algorithm specified in the header."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Example:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'Header:    {"alg": "HS256", "typ": "JWT"}\nPayload:   {"userId": 123, "email": "joe@example.com"}\nSignature: HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload), secret)\n'})}),"\n",(0,t.jsxs)(s.p,{children:["JWTs are ",(0,t.jsx)(s.strong,{children:"not encrypted"})," by default \u2014 they are merely encoded. So ",(0,t.jsx)(s.strong,{children:"never store sensitive data"})," like passwords in them."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"why-use-jwt",children:"Why Use JWT?"}),"\n",(0,t.jsx)(s.p,{children:"JWTs are popular in modern web and mobile development for several reasons:"}),"\n",(0,t.jsx)(s.h3,{id:"1-stateless-authentication",children:"1. Stateless Authentication"}),"\n",(0,t.jsx)(s.p,{children:"JWT enables stateless authentication, meaning the server doesn\u2019t need to keep a session or track user state. This is ideal for:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"RESTful APIs"}),"\n",(0,t.jsx)(s.li,{children:"Microservices"}),"\n",(0,t.jsx)(s.li,{children:"Serverless environments"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"No need for database lookups on every request \u2014 user identity is self-contained in the token."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"2-scalability",children:"2. Scalability"}),"\n",(0,t.jsx)(s.p,{children:"JWTs allow your backend to scale horizontally with ease. There\u2019s no need to sync session data between instances, making it great for distributed or cloud-native systems."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"3-cross-domain-and-cross-platform-support",children:"3. Cross-domain and Cross-platform Support"}),"\n",(0,t.jsx)(s.p,{children:"JWTs are platform-agnostic and can be used across:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Browsers"}),"\n",(0,t.jsx)(s.li,{children:"Mobile apps"}),"\n",(0,t.jsx)(s.li,{children:"IoT devices"}),"\n",(0,t.jsx)(s.li,{children:"Microservices"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"They're transmitted via standard HTTP headers or URLs and don\u2019t rely on cookies."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"4-fine-grained-control-via-claims",children:"4. Fine-grained Control via Claims"}),"\n",(0,t.jsx)(s.p,{children:"JWTs support custom claims, enabling:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Role-based access control (RBAC)"}),"\n",(0,t.jsx)(s.li,{children:"Scoped permissions"}),"\n",(0,t.jsx)(s.li,{children:"Expiration management"}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"5-widely-supported",children:"5. Widely Supported"}),"\n",(0,t.jsx)(s.p,{children:"JWT libraries are available for most modern languages and frameworks, making integration easy."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"alternatives-to-jwt",children:"Alternatives to JWT"}),"\n",(0,t.jsx)(s.h3,{id:"1-session-based-authentication",children:"1. Session-Based Authentication"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Server stores user session in memory or database."}),"\n",(0,t.jsx)(s.li,{children:"Client gets a session ID, usually via a cookie."}),"\n",(0,t.jsx)(s.li,{children:"Each request includes the session ID."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Simple and secure (especially with cookies + HTTPS)"}),"\n",(0,t.jsx)(s.li,{children:"Easy session revocation"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Requires stateful server"}),"\n",(0,t.jsx)(s.li,{children:"Difficult to scale horizontally"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Best for:"})," Traditional server-rendered web apps."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h3,{id:"2-oauth-20--access-tokens",children:["2. ",(0,t.jsx)(s.a,{href:"https://oauth.net/2/",children:"OAuth 2.0"})," + Access Tokens"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Involves authorization servers and resource servers."}),"\n",(0,t.jsx)(s.li,{children:"Often uses JWT as access tokens."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Secure and standardized"}),"\n",(0,t.jsx)(s.li,{children:"Supports scopes, delegated access"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"More complex to implement"}),"\n",(0,t.jsx)(s.li,{children:"Overkill for small-scale apps"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Best for:"})," APIs needing 3rd-party access (e.g., \u201cLogin with Google\u201d)."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"3-api-keys",children:"3. API Keys"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Static API key is sent with requests."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Simple to implement"}),"\n",(0,t.jsx)(s.li,{children:"Good for service-to-service authentication"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"No user identity"}),"\n",(0,t.jsx)(s.li,{children:"No expiration or standard revocation"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Best for:"})," Internal APIs or machine-to-machine auth."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"4-paseto-platform-agnostic-security-tokens",children:"4. Paseto (Platform-Agnostic Security Tokens)"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Secure alternative to JWT with built-in encryption options."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Safer by design"}),"\n",(0,t.jsx)(s.li,{children:"Easier to audit"}),"\n",(0,t.jsx)(s.li,{children:"No insecure algorithms"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Less widely adopted"}),"\n",(0,t.jsx)(s.li,{children:"Fewer libraries"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Best for:"})," Apps wanting JWT-style features with better defaults."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"setting-up-jwt-in-a-nodejs--express--typescript-project",children:"Setting Up JWT in a Node.js + Express + TypeScript Project"}),"\n",(0,t.jsx)(s.h3,{id:"setup--dependencies",children:"Setup & Dependencies"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"npm init -y\nnpm install express jsonwebtoken dotenv\nnpm install --save-dev typescript ts-node @types/express @types/jsonwebtoken\nnpx tsc --init\n"})}),"\n",(0,t.jsx)(s.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"jwt-auth-demo/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u251c\u2500\u2500 auth.ts\n\u2502   \u2514\u2500\u2500 types.ts\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500 tsconfig.json\n"})}),"\n",(0,t.jsx)(s.h3,{id:"env",children:".env"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"JWT_SECRET=supersecretkey123\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"example-typescript-code",children:"Example TypeScript Code"}),"\n",(0,t.jsx)(s.h3,{id:"typests",children:(0,t.jsx)(s.code,{children:"types.ts"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"export interface UserPayload {\n  id: number;\n  email: string;\n}\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"authts",children:(0,t.jsx)(s.code,{children:"auth.ts"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import jwt from 'jsonwebtoken';\nimport { Request, Response, NextFunction } from 'express';\nimport { UserPayload } from './types';\n\nconst SECRET = process.env.JWT_SECRET || 'fallback_secret';\n\nexport function generateToken(user: UserPayload): string {\n  return jwt.sign(user, SECRET, { expiresIn: '1h' });\n}\n\nexport function authenticateToken(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader?.split(' ')[1];\n\n  if (!token) {\n    return res.status(401).json({ message: 'Missing token' });\n  }\n\n  jwt.verify(token, SECRET, (err, user) => {\n    if (err) return res.status(403).json({ message: 'Invalid or expired token' });\n    req.user = user as UserPayload;\n    next();\n  });\n}\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"indexts",children:(0,t.jsx)(s.code,{children:"index.ts"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import express, { Request, Response } from 'express';\nimport dotenv from 'dotenv';\nimport { generateToken, authenticateToken } from './auth';\nimport { UserPayload } from './types';\n\ndotenv.config();\nconst app = express();\napp.use(express.json());\n\nconst PORT = 3000;\n\nconst dummyUser: UserPayload = { id: 1, email: 'test@example.com' };\n\napp.post('/login', (req: Request, res: Response) => {\n  const token = generateToken(dummyUser);\n  res.json({ token });\n});\n\napp.get('/protected', authenticateToken, (req: Request, res: Response) => {\n  res.json({\n    message: 'Access granted to protected route',\n    user: req.user\n  });\n});\n\napp.listen(PORT, () => console.log(`Server running at http://localhost:${PORT}`));\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"how-to-test-jwt-auth",children:"How to Test JWT Auth"}),"\n",(0,t.jsx)(s.h3,{id:"1-get-a-token",children:"1. Get a Token"}),"\n",(0,t.jsxs)(s.p,{children:["Use ",(0,t.jsx)(s.a,{href:"https://www.postman.com/",children:"Postman"})," or ",(0,t.jsx)(s.code,{children:"curl"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -X POST http://localhost:3000/login\n"})}),"\n",(0,t.jsx)(s.p,{children:"You\u2019ll receive a JSON response:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{ "token": "eyJhbGciOi..." }\n'})}),"\n",(0,t.jsx)(s.h3,{id:"2-access-protected-route",children:"2. Access Protected Route"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'curl -H "Authorization: Bearer <your_token>" http://localhost:3000/protected\n'})}),"\n",(0,t.jsxs)(s.p,{children:["You should see a success message and user data if the token is valid.\nHowever, you can also take the JSON response and paste it to the ",(0,t.jsx)(s.a,{href:"https://jwt.io/#debugger-io",children:"JWT debugger"})," to see\nand check the result."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"good-practices",children:"Good Practices"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Use HTTPS"})," in production to prevent token interception."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Set reasonable expiration times"})," (",(0,t.jsx)(s.code,{children:"expiresIn"}),") and implement token refresh strategies."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Blacklist tokens"})," on logout (especially for critical apps)."]}),"\n",(0,t.jsxs)(s.li,{children:["Avoid storing JWTs in ",(0,t.jsx)(s.code,{children:"localStorage"})," if possible (consider ",(0,t.jsx)(s.code,{children:"HttpOnly"})," cookies for XSS protection)."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(s.p,{children:"JWTs provide a fast, scalable, and secure way to handle authentication in modern applications. With this approach:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Users authenticate once and receive a token."}),"\n",(0,t.jsx)(s.li,{children:"The token is used on every request to prove their identity."}),"\n",(0,t.jsx)(s.li,{children:"The server doesn\u2019t have to store session state \u2014 it's all in the token."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["JWTs are a key piece of modern ",(0,t.jsx)(s.a,{href:"/docs/tutorials/restful_api",children:(0,t.jsx)(s.strong,{children:"REST APIs"})}),", ",(0,t.jsx)(s.strong,{children:"microservices"}),", and ",(0,t.jsx)(s.strong,{children:"serverless architectures"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var r=n(6540);const t={},i=r.createContext(t);function o(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);